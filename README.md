Loris
=====================

**Loris** это фреймворк на языке Erlang, предназначенный для быстрой
  разработки серверной части, реализующей нужное API. На текущий
  момент поддерживаются HTTP REST, WebSocket (MsgPack). Фреймворк
  представляет из себя легко расширяемую и конфигурируемую заготовку,
  избавляющую разработчика от необходимости заботиться о рутинных
  механизмах, таких как сессии, авторизация, база данных, аплоад
  файлов на сервер, расшаривание данных из БД, расшаривание
  статических файлов, горизонтальное масштабирование и т.д.

Использование
--------------------

Перед началом работы, необходимо необходимо подготовить систему - нам
понадобятся git, rebar3 и Erlang-19+:

>       $ wget https://s3.amazonaws.com/rebar3/rebar3 && chmod +x
        rebar3 && sudo mv rebar3 /usr/local/bin
>       $ wget
        https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb
>       $ sudo dpkg -i erlang-solutions_1.0_all.deb
>       $ sudo apt-get update
>       $ sudo apt-get install erlang git

Теперь система готова к работе, клонируем Loris:

>       $ git clone https://github.com/NoobsEnslaver/loris.git

Запускаем сервер:

>       $ cd loris && rebar3 run

Для остановки сервера

>       $ q().

Но перед реальным использованием сервер нужно сконфигурировать.

Конфигурирование
----------------------

Общие конфигурационные моменты находятся в папке config, но наиболее
важные настройки указываются в *.app.src файлах приложений из папки
apps, таких как server и db (в будущем планируется вынести все
настройки в файлы в папке config).

Хостинг статических файлов
----------------------

В файле loris/apps/server/src/server.app.src в поле static_dir
указывается раположение статических файлов, доступ к которым будет
предоставлять эта машина (по умолчанию на порте 8080)

Реализация REST API
----------------------

Для создания пользовательского REST API необходимо создать новый
эрланг модуль, реализующий поведение rest_protocol_behaviour, которое
требует описания функций get/3, head/3, post/3, put/3, patch/3,
delete/3, options/3 и подложить данный модуль в папку
loris/apps/server/src/rest. Модуль должен иметь название, следующее
образцу: rest_NAME_protocol_VERSION. Имя и версия будут определять адресс, по
которому будет доступно это API. Например, модуль
rest_auth_protocol_v1 будет доступен по адрессу (дефолтные настройки)
localhost:8080/v1/auth. Модули, перечисленные в адрессной строке,
взаимодействуют друг с другом, например, при запросе по адресу
localhost:8080/v1/auth/example вначале управление будет передано
модулю auth, который выполнит свою часть работы, проверяя, авторизован
ли пользователь, либо авторизуя его, затем сформирует стэйт, который
будет передан следующему модулю, в данному случае модулю
rest_example_protocol_v1. Таким образом, вы можете избежать
повторяемого кода, например, реализации механизмов авторизации.
В поставке с Loris идёт набор модулей-протоколов, расположенных в
той-же папке rest, можно ознакомиться с их содержимым для понимания
принципов оформления протокола.

Реализация WebSocket API
----------------------

Сессии, авторизация
----------------------

Администрирование
----------------------

Бэкапы и восстановление
----------------------
